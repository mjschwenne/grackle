func Unmarshal(s []byte) (*S, []byte) {
    << param .Name >> := new(S)
    var enc = s // Needed for goose compatibility
    << range .Fields ->>
    <<- if isMessage . >>
    << param $.Name >>.<< goName .Name >>, enc = << goType . | lower >>_gk.Unmarshal(enc)
    <<- else if isRef . ->>
    var << .Name >>Len uint64
    var << .Name >>Bytes []byte
    <<- if isCoqType . "string" >>
    var << .Name >>Str string<< end >>
    << .Name >>Len, enc = marshal.ReadInt(enc)
    << .Name >>Bytes, enc = marshal.ReadBytesCopy(enc, << .Name >>Len)
    <<- if isCoqType . "string" >>
    << .Name >>Str = string(<< .Name >>Bytes)<< end >>
    << param $.Name >>.<< goName .Name >> = &<< .Name >><< if isCoqType . "string" >>Str<< end >>
    <<- else >>
    << param $.Name >>.<< goName .Name >>, enc = marshal.Read<<- marshalType . ->>(enc)
    << end ->> <<- end >>
    return << param .Name >>, enc
}
