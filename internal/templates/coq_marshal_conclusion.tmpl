
  iApply "HÎ¦". rewrite -?app_assoc.
  iFrame. iPureIntro.

  unfold has_encoding.
  split; last done.
  << $eenc := (extEncFields .Fields) ->>
  << if gt (len $eenc) 0 >>exists << range $idx, $field := $eenc ->>
  <<- if $idx >>, << end ->>
  <<- .Name ->>_enc
  <<- end >>.<< end >>
  << if gt (len $eenc) 0 >>split.
  {
     << range (filterByCoqType .Fields "u8|list") ->>
     rewrite Hown_<< .Name >>_sz.
     << end ->>
     rewrite ?w64_to_nat_id.
     congruence.
  }
  << range (filterByCoqType .Fields "message") ->><< if isRepeatedType . ->>
  rewrite <- Hown_<< .Name >>_sz'.
  << end >><< end ->>
  done.<< else >>congruence.<< end >> 
Qed.
