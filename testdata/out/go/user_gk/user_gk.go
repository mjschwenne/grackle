//--------------------------------------
// This file is autogenerated by grackle
// DO NOT MANUALLY EDIT THIS FILE
//--------------------------------------

package user_gk

import (
	"github.com/goose-lang/primitive"
	"github.com/goose-lang/std"
	"github.com/tchajed/marshal"
)

type S struct {
	Name  string
	Email string
}

func Marshal(enc []byte, u S) []byte {
	primitive.AssumeNoStringOverflow(u.Name)
	enc = marshal.WriteLenPrefixedBytes(enc, []byte(u.Name))
	primitive.AssumeNoStringOverflow(u.Email)
	enc = marshal.WriteLenPrefixedBytes(enc, []byte(u.Email))

	return enc
}

func Unmarshal(s []byte) (S, []byte) {

	nameBytes, s := marshal.ReadLenPrefixedBytes(s)
	name := string(std.BytesClone(nameBytes))
	emailBytes, s := marshal.ReadLenPrefixedBytes(s)
	email := string(std.BytesClone(emailBytes))

	return S{
		Name:  name,
		Email: email,
	}, s
}
