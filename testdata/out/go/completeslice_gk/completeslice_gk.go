//--------------------------------------
// This file is autogenerated by grackle
// DO NOT MANUALLY EDIT THIS FILE
//--------------------------------------

package completeslice_gk

import (
	"github.com/goose-lang/primitive"
	"github.com/goose-lang/std"
	"github.com/tchajed/marshal"
)

type S struct {
	Strg   string
	Strg2  string
	Bytes  []byte
	Bytes2 []byte
}

func Marshal(enc []byte, c S) []byte {
	primitive.AssumeNoStringOverflow(c.Strg)
	enc = marshal.WriteLenPrefixedBytes(enc, []byte(c.Strg))
	primitive.AssumeNoStringOverflow(c.Strg2)
	enc = marshal.WriteLenPrefixedBytes(enc, []byte(c.Strg2))
	enc = marshal.WriteInt(enc, uint64(len(c.Bytes)))
	enc = marshal.WriteBytes(enc, c.Bytes)
	enc = marshal.WriteInt(enc, uint64(len(c.Bytes2)))
	enc = marshal.WriteBytes(enc, c.Bytes2)

	return enc
}

func Unmarshal(s []byte) (S, []byte) {

	strgBytes, s := marshal.ReadLenPrefixedBytes(s)
	strg := string(std.BytesClone(strgBytes))
	strg2Bytes, s := marshal.ReadLenPrefixedBytes(s)
	strg2 := string(std.BytesClone(strg2Bytes))
	bytesBytes, s := marshal.ReadLenPrefixedBytes(s)
	bytes := std.BytesClone(bytesBytes)
	bytes2Bytes, s := marshal.ReadLenPrefixedBytes(s)
	bytes2 := std.BytesClone(bytes2Bytes)

	return S{
		Strg:   strg,
		Strg2:  strg2,
		Bytes:  bytes,
		Bytes2: bytes2,
	}, s
}
