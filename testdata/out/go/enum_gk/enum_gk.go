//--------------------------------------
// This file is autogenerated by grackle
// DO NOT MANUALLY EDIT THIS FILE
//--------------------------------------

package enum_gk

import (
	"github.com/goose-lang/primitive"
	"github.com/goose-lang/std"
	"github.com/tchajed/marshal"

	"github.com/mjschwenne/grackle/testdata/out/go/error_gk"
)

type S struct {
	Op  string
	Err error_gk.E
}

func Marshal(enc []byte, e S) []byte {
	primitive.AssumeNoStringOverflow(e.Op)
	enc = marshal.WriteLenPrefixedBytes(enc, []byte(e.Op))
	enc = marshal.WriteInt32(enc, uint32(e.Err))

	return enc
}

func Unmarshal(s []byte) (S, []byte) {

	opBytes, s := marshal.ReadLenPrefixedBytes(s)
	op := string(std.BytesClone(opBytes))
	err_int, s := marshal.ReadInt32(s)
	err := error_gk.E(err_int)

	return S{
		Op:  op,
		Err: err,
	}, s
}
