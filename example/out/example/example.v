(* autogenerated from example/example *)
From Perennial.goose_lang Require Import prelude.

Section code.
Context `{ext_ty: ext_types}.
Local Coercion Var' s: expr := Var s.

Definition TimeStamp := struct.decl [
  "hour" :: uint32T;
  "minute" :: uint32T;
  "second" :: uint32T
].

Definition TimeStamp__marshal: val :=
  rec: "TimeStamp__marshal" "t" :=
    let: "enc" := NewSlice byteT #12 in
    let: "off" := ref_to uint32T #(U32 0) in
    UInt32Put (SliceSkip byteT "enc" (![uint32T] "off")) (struct.get TimeStamp "hour" "t");;
    "off" <-[uint32T] ((![uint32T] "off") + #(U32 4));;
    UInt32Put (SliceSkip byteT "enc" (![uint32T] "off")) (struct.get TimeStamp "minute" "t");;
    "off" <-[uint32T] ((![uint32T] "off") + #(U32 4));;
    UInt32Put (SliceSkip byteT "enc" (![uint32T] "off")) (struct.get TimeStamp "second" "t");;
    "enc".

Definition UnmarshalTimeStamp: val :=
  rec: "UnmarshalTimeStamp" "enc" :=
    let: "ts" := ref (zero_val (struct.t TimeStamp)) in
    let: "off" := ref (zero_val uint32T) in
    struct.storeF TimeStamp "hour" "ts" (UInt32Get (SliceSkip byteT "enc" (![uint32T] "off")));;
    "off" <-[uint32T] ((![uint32T] "off") + #(U32 4));;
    struct.storeF TimeStamp "minute" "ts" (UInt32Get (SliceSkip byteT "enc" (![uint32T] "off")));;
    "off" <-[uint32T] ((![uint32T] "off") + #(U32 4));;
    struct.storeF TimeStamp "second" "ts" (UInt32Get (SliceSkip byteT "enc" (![uint32T] "off")));;
    "ts".

End code.
